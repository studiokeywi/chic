{
  "version": 3,
  "sources": ["../lib/index.ts"],
  "sourcesContent": ["/// <reference path=\"../types.d.ts\" />\r\nimport type {\r\n  Chic,\r\n  ChicCSSBuilder,\r\n  ChicConfig,\r\n  ChicLogger,\r\n  ChicLoggers,\r\n  ChicPlugin,\r\n  ChicPluginFunction,\r\n  ChicPlugins,\r\n} from 'chic';\r\nimport { cssFormatter } from './css.js';\r\nimport { buildLoggers } from './loggers.js';\r\nimport { drawImage, labelMaker, snoop, timestamp } from './plugins/index.js';\r\n\r\n/** Generate Chic's install/uninstall plugin functions\r\n * @internal\r\n * @returns {ChicPlugins & { [plugin: string]: ChicPluginFunction }} */\r\nconst buildPlugins = (chic: Chic): ChicPlugins & { [plugin: string]: ChicPluginFunction } =>\r\n  <ChicPlugins & { [plugin: string]: ChicPluginFunction }>{\r\n    install: (plugin: ChicPlugin<ChicPluginFunction>) => {\r\n      if (plugin.id in chic.plugins) return chic.warn`Cannot overwrite an existing plugin`;\r\n      const pluginFn = plugin.install(chic);\r\n      if (plugin.uninstall) pluginFn.uninstall = plugin.uninstall;\r\n      chic.plugins[plugin.id] = pluginFn;\r\n    },\r\n    uninstall: (id: string) => {\r\n      if (!(id in chic.plugins)) return;\r\n      chic.plugins[id]?.uninstall?.(chic);\r\n      delete chic.plugins[id];\r\n    },\r\n  };\r\n\r\n/** Create a new Chic `ProxyHandler`\r\n * @internal\r\n * @returns {ProxyHandler<Chic>} */\r\nconst buildChicHandler = (styles: string[][]): ProxyHandler<Chic> => ({\r\n  get(self, key, chic) {\r\n    if ('symbol' === typeof key || key in self) return Reflect.get(self, key, chic);\r\n    const last = styles.at(-1)!;\r\n    const val = cssFormatter(key);\r\n    !styles.length || last.length > 1 ? styles.push([val]) : last.push(val);\r\n    return chic;\r\n  },\r\n});\r\n\r\n/** Builds a new instance of a Chic logger\r\n * @param {ChicConfig} config Chic config\r\n * @returns {Chic} A new Chic logger */\r\nconst buildChic = ({ fixed = [], plugins = [] }: ChicConfig = {}): Chic => {\r\n  /** Current CSS styles */\r\n  const styles: string[][] = [];\r\n  /** Builds the current style string */\r\n  const buildStyle = () => [...fixed, ...styles.splice(0, styles.length)].map(style => style.join(':')).join(';');\r\n  /** Lock in the current styles */\r\n  const fix = () => buildChic({ fixed: [...fixed, ...styles.splice(0, styles.length)] });\r\n  /** Inject styles from another `Chic` instance */\r\n  const inject = (...styleStrs: string[]) =>\r\n    buildChic({\r\n      fixed: [\r\n        ...fixed,\r\n        ...styles.splice(0, styles.length),\r\n        ...styleStrs.flatMap(styles => styles.split(';').map(style => style.split(':'))),\r\n      ],\r\n    });\r\n\r\n  /** Loggers, fix, and plugins */\r\n  const chicBase = { ...buildLoggers(), inject, fix };\r\n  /** Chic object */\r\n  const chic = <Chic>new Proxy(Object.assign(buildStyle, chicBase), buildChicHandler(styles));\r\n  chic.plugins = buildPlugins(chic);\r\n  plugins.forEach(chic.plugins.install);\r\n  return chic;\r\n};\r\n\r\n/** Chic: CSS console formatting through tagged templates\r\n * @type {Chic} */\r\nconst chic: Chic = /* @__PURE__ */ buildChic({ plugins: [drawImage, labelMaker, snoop, timestamp] });\r\n\r\nexport { buildChic, chic };\r\n\r\nexport type { Chic, ChicCSSBuilder, ChicConfig, ChicLogger, ChicLoggers, ChicPlugin, ChicPluginFunction, ChicPlugins };\r\n"],
  "mappings": "AAWA,SAAS,oBAAoB;AAC7B,SAAS,oBAAoB;AAC7B,SAAS,WAAW,YAAY,OAAO,iBAAiB;AAKxD,MAAM,eAAe,CAACA,WACoC;AAAA,EACtD,SAAS,CAAC,WAA2C;AACnD,QAAI,OAAO,MAAMA,MAAK;AAAS,aAAOA,MAAK;AAC3C,UAAM,WAAW,OAAO,QAAQA,KAAI;AACpC,QAAI,OAAO;AAAW,eAAS,YAAY,OAAO;AAClD,IAAAA,MAAK,QAAQ,OAAO,EAAE,IAAI;AAAA,EAC5B;AAAA,EACA,WAAW,CAAC,OAAe;AACzB,QAAI,EAAE,MAAMA,MAAK;AAAU;AAC3B,IAAAA,MAAK,QAAQ,EAAE,GAAG,YAAYA,KAAI;AAClC,WAAOA,MAAK,QAAQ,EAAE;AAAA,EACxB;AACF;AAKF,MAAM,mBAAmB,CAAC,YAA4C;AAAA,EACpE,IAAI,MAAM,KAAKA,OAAM;AACnB,QAAI,aAAa,OAAO,OAAO,OAAO;AAAM,aAAO,QAAQ,IAAI,MAAM,KAAKA,KAAI;AAC9E,UAAM,OAAO,OAAO,GAAG,EAAE;AACzB,UAAM,MAAM,aAAa,GAAG;AAC5B,KAAC,OAAO,UAAU,KAAK,SAAS,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,KAAK,KAAK,GAAG;AACtE,WAAOA;AAAA,EACT;AACF;AAKA,MAAM,YAAY,CAAC,EAAE,QAAQ,CAAC,GAAG,UAAU,CAAC,EAAE,IAAgB,CAAC,MAAY;AAEzE,QAAM,SAAqB,CAAC;AAE5B,QAAM,aAAa,MAAM,CAAC,GAAG,OAAO,GAAG,OAAO,OAAO,GAAG,OAAO,MAAM,CAAC,EAAE,IAAI,WAAS,MAAM,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG;AAE9G,QAAM,MAAM,MAAM,UAAU,EAAE,OAAO,CAAC,GAAG,OAAO,GAAG,OAAO,OAAO,GAAG,OAAO,MAAM,CAAC,EAAE,CAAC;AAErF,QAAM,SAAS,IAAI,cACjB,UAAU;AAAA,IACR,OAAO;AAAA,MACL,GAAG;AAAA,MACH,GAAG,OAAO,OAAO,GAAG,OAAO,MAAM;AAAA,MACjC,GAAG,UAAU,QAAQ,CAAAC,YAAUA,QAAO,MAAM,GAAG,EAAE,IAAI,WAAS,MAAM,MAAM,GAAG,CAAC,CAAC;AAAA,IACjF;AAAA,EACF,CAAC;AAGH,QAAM,WAAW,EAAE,GAAG,aAAa,GAAG,QAAQ,IAAI;AAElD,QAAMD,QAAa,IAAI,MAAM,OAAO,OAAO,YAAY,QAAQ,GAAG,iBAAiB,MAAM,CAAC;AAC1F,EAAAA,MAAK,UAAU,aAAaA,KAAI;AAChC,UAAQ,QAAQA,MAAK,QAAQ,OAAO;AACpC,SAAOA;AACT;AAIA,MAAM,OAA6B,0BAAU,EAAE,SAAS,CAAC,WAAW,YAAY,OAAO,SAAS,EAAE,CAAC;",
  "names": ["chic", "styles"]
}
