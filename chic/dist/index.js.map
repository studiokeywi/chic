{
  "version": 3,
  "sources": ["../lib/index.ts"],
  "sourcesContent": ["// TODO: improve typing\r\n// TODO: fix type locations for plugin extensibility (if possible)\r\nimport { cssFormatter, type ChicCSSBuilder } from './cssBuilder.js';\r\nimport { buildLoggers, type ChicLoggers } from './loggers.js';\r\nimport {\r\n  drawImage,\r\n  labelMaker,\r\n  snoop,\r\n  timestamp,\r\n  type ChicPlugin,\r\n  type ChicPluginFunction,\r\n  type ChicPlugins,\r\n} from './plugins.js';\r\n\r\n/** Builds a new instance of a Chic logger\r\n * @param {import('@studiokeywi/chic').ChicConfig} config Chic config\r\n * @returns A new Chic logger */\r\nexport const buildChic = ({ fixed = [], plugins = [] }: ChicConfig = {}) => {\r\n  const chicHandler: ProxyHandler<Chic> = {\r\n    get(self, key, chic) {\r\n      if ('symbol' === typeof key || key in self) return Reflect.get(self, key, chic);\r\n      const last = styles.at(-1);\r\n      const val = cssFormatter(key);\r\n      !styles.length || last.length > 1 ? styles.push([val]) : last.push(val);\r\n      return chic;\r\n    },\r\n  };\r\n  /** Current CSS styles */\r\n  const styles: string[][] = [];\r\n  /** Builds the current style string */\r\n  const buildStyle = () => useStyles(true).join(';');\r\n  /** Gets all fixed and pending styles, then resets all currently pending styles\r\n   * @param map Whether to map the inner arrays to single strings joined with `:` */\r\n  const useStyles = (map = false) => {\r\n    const use = [...fixed, ...styles.splice(0, styles.length)];\r\n    return map ? use.map(style => style.join(':')) : use;\r\n  };\r\n  /** Install/Uninstall plugins functions */\r\n  const pluginObj: ChicPlugins = {\r\n    install: (plugin: ChicPlugin) => {\r\n      if (plugin.id in chic.plugins) return chic.warn`Cannot overwrite an existing plugin`;\r\n      const pluginFn = /* @__PURE__ */ plugin.install(chic);\r\n      if (plugin.uninstall) pluginFn.uninstall = plugin.uninstall;\r\n      chic.plugins[plugin.id] = pluginFn;\r\n    },\r\n    uninstall: (id: string) => {\r\n      if (!(id in chic.plugins)) return;\r\n      /* @__PURE__ */ chic.plugins[id]?.uninstall?.(chic);\r\n      delete chic.plugins[id];\r\n    },\r\n  };\r\n  /** Loggers, fix, and plugins */\r\n  const chicBase = {\r\n    .../* @__PURE__ */ buildLoggers(),\r\n    fix: () => buildChic({ fixed: useStyles() as string[][] }),\r\n    plugins: pluginObj,\r\n  };\r\n  /** Chic object */\r\n  const chic = <Chic>new Proxy(Object.assign(buildStyle, chicBase), chicHandler);\r\n  plugins.forEach(/* @__PURE__ */ chic.plugins.install);\r\n  return chic;\r\n};\r\n/** Chic: CSS console formatting through tagged templates */\r\nexport default /* @__PURE__ */ buildChic({ plugins: [drawImage, labelMaker, snoop, timestamp] });\r\n\r\nexport type { ChicPlugin, ChicPluginFunction } from './plugins.js';\r\n/** Browser console logging with CSS formatting */\r\nexport type Chic = {\r\n  /** Builds the current style string */\r\n  (): string;\r\n  // SECTION: chic API\r\n  /** Create a new Chic instances with the currently pending styles fixed  */\r\n  fix(): Chic;\r\n  /** Extra features available from installed plugins */\r\n  plugins: ChicPlugins & { [plugin: string]: ChicPluginFunction };\r\n} & ChicCSSBuilder &\r\n  ChicLoggers;\r\n/** Configuration for building Chic instances */\r\nexport type ChicConfig = {\r\n  /** Fixed styles to always apply when building style strings */\r\n  fixed?: string[][];\r\n  /** Plugins to extend Chic functionality */\r\n  plugins?: ChicPlugin[];\r\n};\r\n"],
  "mappings": "AAEA,SAAS,oBAAyC;AAClD,SAAS,oBAAsC;AAC/C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAIK;AAKA,MAAM,YAAY,CAAC,EAAE,QAAQ,CAAC,GAAG,UAAU,CAAC,EAAE,IAAgB,CAAC,MAAM;AAC1E,QAAM,cAAkC;AAAA,IACtC,IAAI,MAAM,KAAKA,OAAM;AACnB,UAAI,aAAa,OAAO,OAAO,OAAO;AAAM,eAAO,QAAQ,IAAI,MAAM,KAAKA,KAAI;AAC9E,YAAM,OAAO,OAAO,GAAG,EAAE;AACzB,YAAM,MAAM,aAAa,GAAG;AAC5B,OAAC,OAAO,UAAU,KAAK,SAAS,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,KAAK,KAAK,GAAG;AACtE,aAAOA;AAAA,IACT;AAAA,EACF;AAEA,QAAM,SAAqB,CAAC;AAE5B,QAAM,aAAa,MAAM,UAAU,IAAI,EAAE,KAAK,GAAG;AAGjD,QAAM,YAAY,CAAC,MAAM,UAAU;AACjC,UAAM,MAAM,CAAC,GAAG,OAAO,GAAG,OAAO,OAAO,GAAG,OAAO,MAAM,CAAC;AACzD,WAAO,MAAM,IAAI,IAAI,WAAS,MAAM,KAAK,GAAG,CAAC,IAAI;AAAA,EACnD;AAEA,QAAM,YAAyB;AAAA,IAC7B,SAAS,CAAC,WAAuB;AAC/B,UAAI,OAAO,MAAM,KAAK;AAAS,eAAO,KAAK;AAC3C,YAAM,WAA2B,uBAAO,QAAQ,IAAI;AACpD,UAAI,OAAO;AAAW,iBAAS,YAAY,OAAO;AAClD,WAAK,QAAQ,OAAO,EAAE,IAAI;AAAA,IAC5B;AAAA,IACA,WAAW,CAAC,OAAe;AACzB,UAAI,EAAE,MAAM,KAAK;AAAU;AACX,2BAAK,QAAQ,EAAE,GAAG,YAAY,IAAI;AAClD,aAAO,KAAK,QAAQ,EAAE;AAAA,IACxB;AAAA,EACF;AAEA,QAAM,WAAW;AAAA,IACf,GAAmB,6BAAa;AAAA,IAChC,KAAK,MAAM,UAAU,EAAE,OAAO,UAAU,EAAgB,CAAC;AAAA,IACzD,SAAS;AAAA,EACX;AAEA,QAAM,OAAa,IAAI,MAAM,OAAO,OAAO,YAAY,QAAQ,GAAG,WAAW;AAC7E,UAAQ,QAAwB,KAAK,QAAQ,OAAO;AACpD,SAAO;AACT;AAEA,IAAO,cAAwB,0BAAU,EAAE,SAAS,CAAC,WAAW,YAAY,OAAO,SAAS,EAAE,CAAC;",
  "names": ["chic"]
}
