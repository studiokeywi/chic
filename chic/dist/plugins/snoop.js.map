{
  "version": 3,
  "sources": ["../../lib/plugins/snoop.ts"],
  "sourcesContent": ["import { ChicLoggers, type Chic } from '../chic.js';\r\nimport { type ChicPlugin } from './index.js';\r\n\r\nlet running: number;\r\n\r\n// TODO: documentation\r\n// prettier-ignore\r\nconst install = (chic: Chic) => ({ check, labels = ['Event Occurred'], level = 'log', repeat = false, styles = [''] }: SnoopConfig) => {\r\n    const log = () => (chic[level](labels, ...styles), repeat && start());\r\n    const poll = () => {\r\n      const ready = check();\r\n      const result = (ready: boolean) => (ready ? log : start)();\r\n      if (!(ready instanceof Promise)) return result(ready);\r\n      ready.then(result);\r\n    };\r\n    const start = () => {\r\n      if (running) stop();\r\n      running = requestAnimationFrame(poll);\r\n    };\r\n    const stop = () => {\r\n      cancelAnimationFrame(running);\r\n    };\r\n    start();\r\n    return { start, stop };\r\n  };\r\nexport default <ChicPlugin>{ id: 'snoop', install, uninstall: () => cancelAnimationFrame(running) };\r\n\r\nexport type SnoopConfig = {\r\n  check: (...args: any[]) => boolean | Promise<boolean>;\r\n  labels?: string[];\r\n  level?: keyof ChicLoggers;\r\n  rate?: number;\r\n  repeat?: boolean;\r\n  styles?: string[];\r\n};\r\n"],
  "mappings": "AAGA,IAAI;AAIJ,MAAM,UAAU,CAAC,SAAe,CAAC,EAAE,OAAO,SAAS,CAAC,gBAAgB,GAAG,QAAQ,OAAO,SAAS,OAAO,SAAS,CAAC,EAAE,EAAE,MAAmB;AACnI,QAAM,MAAM,OAAO,KAAK,KAAK,EAAE,QAAQ,GAAG,MAAM,GAAG,UAAU,MAAM;AACnE,QAAM,OAAO,MAAM;AACjB,UAAM,QAAQ,MAAM;AACpB,UAAM,SAAS,CAACA,YAAoBA,SAAQ,MAAM,OAAO;AACzD,QAAI,EAAE,iBAAiB;AAAU,aAAO,OAAO,KAAK;AACpD,UAAM,KAAK,MAAM;AAAA,EACnB;AACA,QAAM,QAAQ,MAAM;AAClB,QAAI;AAAS,WAAK;AAClB,cAAU,sBAAsB,IAAI;AAAA,EACtC;AACA,QAAM,OAAO,MAAM;AACjB,yBAAqB,OAAO;AAAA,EAC9B;AACA,QAAM;AACN,SAAO,EAAE,OAAO,KAAK;AACvB;AACF,IAAO,gBAAoB,EAAE,IAAI,SAAS,SAAS,WAAW,MAAM,qBAAqB,OAAO,EAAE;",
  "names": ["ready"]
}
