{
  "version": 3,
  "sources": ["../../lib/plugins/snoop.ts"],
  "sourcesContent": ["import { ChicLoggers } from '../index.js';\r\nimport { ChicPlugin } from './index.js';\r\n\r\nlet running: NodeJS.Timer | number;\r\n\r\nexport default {\r\n  id: 'snoop',\r\n  // TODO: documentation\r\n  install:\r\n    chic =>\r\n    ({ check, labels = ['Event Occurred'], level = 'log', rate = 100, repeat = false, styles = [''] }: SnoopConfig) => {\r\n      const log = () => (chic[level](labels, ...styles), !repeat && stop());\r\n      const poll = () => {\r\n        const ready = check();\r\n        if (!(ready instanceof Promise)) return ready ? log() : void 0;\r\n        ready.then(ready => (ready ? log() : void 0));\r\n      };\r\n      const start = () => (running && stop(), (running = setInterval(poll, rate)));\r\n      const stop = () => clearInterval(running);\r\n      start();\r\n      return { start, stop };\r\n    },\r\n  uninstall: () => clearInterval(running),\r\n} as ChicPlugin;\r\n\r\nexport type SnoopConfig = {\r\n  check: Function;\r\n  labels?: string[];\r\n  level?: keyof ChicLoggers;\r\n  rate?: number;\r\n  repeat?: boolean;\r\n  styles?: string[];\r\n};\r\n"],
  "mappings": "AAGA,IAAI;AAEJ,IAAO,gBAAQ;AAAA,EACb,IAAI;AAAA;AAAA,EAEJ,SACE,UACA,CAAC,EAAE,OAAO,SAAS,CAAC,gBAAgB,GAAG,QAAQ,OAAO,OAAO,KAAK,SAAS,OAAO,SAAS,CAAC,EAAE,EAAE,MAAmB;AACjH,UAAM,MAAM,OAAO,KAAK,KAAK,EAAE,QAAQ,GAAG,MAAM,GAAG,CAAC,UAAU,KAAK;AACnE,UAAM,OAAO,MAAM;AACjB,YAAM,QAAQ,MAAM;AACpB,UAAI,EAAE,iBAAiB;AAAU,eAAO,QAAQ,IAAI,IAAI;AACxD,YAAM,KAAK,CAAAA,WAAUA,SAAQ,IAAI,IAAI,MAAO;AAAA,IAC9C;AACA,UAAM,QAAQ,OAAO,WAAW,KAAK,GAAI,UAAU,YAAY,MAAM,IAAI;AACzE,UAAM,OAAO,MAAM,cAAc,OAAO;AACxC,UAAM;AACN,WAAO,EAAE,OAAO,KAAK;AAAA,EACvB;AAAA,EACF,WAAW,MAAM,cAAc,OAAO;AACxC;",
  "names": ["ready"]
}
