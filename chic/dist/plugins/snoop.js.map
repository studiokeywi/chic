{
  "version": 3,
  "sources": ["../../lib/plugins/snoop.ts"],
  "sourcesContent": ["import type { Chic, ChicLoggers, ChicPlugin } from 'chic';\r\n\r\n// TODO: documentation\r\nconst install = (chic: Chic): Snoop => <Snoop>(({\r\n    check,\r\n    labels = ['Event Occurred'],\r\n    level = 'log',\r\n    repeat = false,\r\n    styles = [''],\r\n  }) => {\r\n    const log = () => (chic[level](labels, ...styles), repeat && start());\r\n    const poll = () => (!((ready = check()) instanceof Promise) ? result(ready) : ready.then(result));\r\n    const result = (ready: boolean) => (ready ? log : start)();\r\n    const start = () => void (running && stop(), (running = requestAnimationFrame(poll)));\r\n    const stop = () => void cancelAnimationFrame(running);\r\n    let ready: boolean | Promise<boolean> = false;\r\n    let running: number;\r\n    start();\r\n    return { start, stop, uninstall: stop };\r\n  });\r\n\r\n// TODO: documentation\r\nconst snoop = <ChicPlugin>{ id: 'snoop', install };\r\n\r\nexport { snoop };\r\n\r\n/** Allows simple messages to be automatically logged when a given condition occurs. The returned `start` and `stop` functions can be used to further control when you are snooping or not.\r\n *\r\n * **NOTE:** The `snoop` plugin uses `requestAnimationFrame` internally to prevent execution while the window is not in focus. Do not rely on this for time-sensitive purposes unless you intend to monitor the window during the entire time of its use. */\r\nexport interface Snoop {\r\n  (config: SnoopConfig): { start: () => void; stop: () => void };\r\n}\r\n/** Configuration for the `snoop` plugin */\r\nexport type SnoopConfig = {\r\n  check: (...args: any[]) => boolean | Promise<boolean>;\r\n  labels?: string[];\r\n  level?: keyof ChicLoggers;\r\n  repeat?: boolean;\r\n  styles?: string[];\r\n};\r\n\r\ndeclare module 'chic' {\r\n  interface ChicPlugins {\r\n    /** Allows simple messages to be automatically logged when a given condition occurs. The returned `start` and `stop` functions can be used to further control when you are snooping or not.\r\n     *\r\n     * **NOTE:** The `snoop` plugin uses `requestAnimationFrame` internally to prevent execution while the window is not in focus. Do not rely on this for time-sensitive purposes unless you intend to monitor the window during the entire time of its use.\r\n     * @internal */\r\n    snoop: Snoop;\r\n  }\r\n}\r\n"],
  "mappings": "AAGA,MAAM,UAAU,CAAC,SAA8B,CAAC;AAAA,EAC5C;AAAA,EACA,SAAS,CAAC,gBAAgB;AAAA,EAC1B,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,SAAS,CAAC,EAAE;AACd,MAAM;AACJ,QAAM,MAAM,OAAO,KAAK,KAAK,EAAE,QAAQ,GAAG,MAAM,GAAG,UAAU,MAAM;AACnE,QAAM,OAAO,MAAO,GAAG,QAAQ,MAAM,cAAc,WAAW,OAAO,KAAK,IAAI,MAAM,KAAK,MAAM;AAC/F,QAAM,SAAS,CAACA,YAAoBA,SAAQ,MAAM,OAAO;AACzD,QAAM,QAAQ,MAAM,MAAM,WAAW,KAAK,GAAI,UAAU,sBAAsB,IAAI;AAClF,QAAM,OAAO,MAAM,KAAK,qBAAqB,OAAO;AACpD,MAAI,QAAoC;AACxC,MAAI;AACJ,QAAM;AACN,SAAO,EAAE,OAAO,MAAM,WAAW,KAAK;AACxC;AAGF,MAAM,QAAoB,EAAE,IAAI,SAAS,QAAQ;",
  "names": ["ready"]
}
